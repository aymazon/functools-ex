from .func import XClass


def test_XClass():
    X = XClass()

    class A():
        x = 'a'

    assert (X == 'A')('A')
    assert ('A' == X)('A')
    assert (X.x._('upper') == 'A')(A())
    assert ((X._('lower').upper)('a'))() == 'A'
    assert (X[0][1] == 2)([(1, 2), (3, 4)])
    assert (X + 2 + 3 == 6)(1)
    assert (X[0] + 2 + 3 == 6)([1])
    assert (X * 2 * 3 == 6)(1)
    assert (X[0] * 2 * 3 == 6)([1])
    assert (X - 2 - 3 == -4)(1)
    assert (X[0] - 2 - 3 == -4)([1])
    assert (X % 5 == 2)(7)
    assert (X[0] % 5 == 2)([7])
    assert (X**5 == 32)(2)
    assert (X[0]**5 == 32)([2])
    assert (X ^ 1 == 3)(2)
    assert (X[0] ^ 1 == 3)([2])
    assert (X // 2 == 0)(1)
    assert (X[0] // 2 == 0)([1])
    assert (X / 2 == 0.5)(1)
    assert (X[0] / 2 == 0.5)([1])
    assert (X << 2 == 4)(1)
    assert (X[0] << 2 == 4)([1])
    assert (X >> 2 == 0)(1)
    assert (X[0] >> 2 == 0)([1])
    assert (X < 2)(1)
    assert (X[0] < 2)([1])
    assert (X <= 2)(2)
    assert (X[0] <= 2)([2])
    assert (X > 2)(3)
    assert (X[0] > 2)([3])
    assert (X >= 2)(2)
    assert (X[0] >= 2)([2])
    assert (X == 2)(2)
    assert (X[0] == 2)([2])
    assert (X != 2)(3)
    assert (X[0] != 2)([3])
    assert (-X == -2)(2)
    assert (-X[0] == -2)([2])
    assert (+X == -2)(-2)
    assert (+X[0] == -2)([-2])
    assert (~X == -2)(1)
    assert (~X[0] == -2)([1])

    assert (2 + X + 3 == 6)(1)
    assert (2 + X[0] + 3 == 6)([1])
    assert (2 * X * 3 == 6)(1)
    assert (2 * X[0] * 3 == 6)([1])
    assert (2 - X - 3 == -2)(1)
    assert (2 - X[0] - 3 == -2)([1])
    assert (7 % X == 2)(5)
    assert (7 % X[0] == 2)([5])
    assert (2**X == 32)(5)
    assert (2**X[0] == 32)([5])
    assert (2 ^ X == 3)(1)
    assert (2 ^ X[0] == 3)([1])
    assert (1 // X == 0)(2)
    assert (1 // X[0] == 0)([2])
    assert (1 / X == 0.5)(2)
    assert (1 / X[0] == 0.5)([2])
    assert (1 << X == 4)(2)
    assert (1 << X[0] == 4)([2])
    assert (1 >> X == 0)(2)
    assert (1 >> X[0] == 0)([2])
    assert (1 < X)(2)
    assert (1 < X[0])([2])
    assert (2 <= X)(2)
    assert (2 <= X[0])([2])
    assert (3 > X)(2)
    assert (3 > X[0])([2])
    assert (2 >= X)(2)
    assert (2 >= X[0])([2])
    assert (2 == X)(2)
    assert (2 == X[0])([2])
    assert (3 != X)(2)
    assert (3 != X[0])([2])
    assert (-2 == -X)(2)
    assert (-2 == -X[0])([2])
    assert (-2 == +X)(-2)
    assert (-2 == +X[0])([-2])
    assert (-2 == ~X)(1)
    assert (-2 == ~X[0])([1])
